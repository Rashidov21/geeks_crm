{% extends 'base.html' %}{% load static %}
{% block title %}Vazifa berish | GEEKS CRM{% endblock %}
{% block content %}
{% comment %}To'liq alohida template. Color: orange{% endcomment %}
{% with gradient_from='from-orange-500' gradient_to='to-orange-600' ring_color='ring-orange-500' text_color='text-orange-600' bg_color='bg-orange-50' hover_from='from-orange-600' hover_to='to-orange-700' hover_from_hover='from-orange-700' hover_to_hover='to-orange-800' %}
<div class="max-w-4xl mx-auto">
  <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
    <div class="flex items-center gap-4">
      <div class="bg-gradient-to-br {{ gradient_from }} {{ gradient_to }} rounded-full p-4">
        <i class="fas fa-tasks text-3xl text-white"></i>
      </div>
      <div class="flex-1">
        <h1 class="text-3xl font-bold text-gray-900">Vazifa berish</h1>
        <p class="text-gray-600 mt-1">Guruhga yangi vazifa tayinlash</p>
      </div>
    </div>
  </div>
  <div class="bg-white rounded-xl shadow-lg p-8">
    <form method="post" enctype="multipart/form-data" class="space-y-6" x-data="{loading: false}" @submit.prevent="loading=true; $el.submit()">
      {% csrf_token %}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6" x-data="{selectedGroup: null}">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Guruh <span class="text-red-500">*</span>
          </label>
          <select name="group" id="group" required 
                  x-model="selectedGroup"
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 {{ ring_color }} focus:border-transparent transition-all">
            <option value="">Guruhni tanlang</option>
            {% for group in groups %}
            <option value="{{ group.id }}">{{ group.name }}</option>
            {% endfor %}
          </select>
          <p class="mt-1 text-xs text-gray-500 flex items-center gap-1"><i class="fas fa-info-circle"></i> Vazifa beriladigan guruhni tanlang</p>
        </div>
        
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Dars
          </label>
          <select name="lesson" id="lesson" 
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 {{ ring_color }} focus:border-transparent transition-all">
            <option value="">Avtomatik (oxirgi dars)</option>
          </select>
          <p class="mt-1 text-xs text-gray-500 flex items-center gap-1"><i class="fas fa-info-circle"></i> Bo'sh qoldiring - guruhning oxirgi darsi avtomatik tanlanadi</p>
        </div>
        
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Vazifa sarlavhasi <span class="text-red-500">*</span>
          </label>
          <input type="text" name="title" required
                 class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 {{ ring_color }} focus:border-transparent transition-all"
                 placeholder="Vazifa sarlavhasini kiriting">
        </div>
        
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Tavsif
          </label>
          <textarea name="description" rows="4"
                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 {{ ring_color }} focus:border-transparent transition-all resize-none"
                    placeholder="Vazifa haqida batafsil ma'lumot"></textarea>
        </div>
        
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Muddati <span class="text-red-500">*</span>
          </label>
          <input type="datetime-local" name="deadline" required
                 class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 {{ ring_color }} focus:border-transparent transition-all">
          <p class="mt-1 text-xs text-gray-500 flex items-center gap-1"><i class="fas fa-info-circle"></i> Vazifa topshirish muddati</p>
        </div>
      </div>
      <div class="flex items-center justify-between pt-6 border-t">
        <a href="{% url 'homework:homework_list' %}" class="inline-flex items-center gap-2 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all font-medium">
          <i class="fas fa-arrow-left"></i><span>Orqaga</span>
        </a>
        <button type="submit" :disabled="loading"
                class="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r {{ hover_from }} {{ hover_to }} hover:{{ hover_from_hover }} hover:{{ hover_to_hover }} text-white rounded-lg shadow-lg hover:shadow-xl transition-all font-semibold disabled:opacity-50">
          <i class="fas" :class="{'fa-spin fa-spinner': loading, 'fa-tasks': !loading}"></i>
          <span x-text="loading ? 'Saqlanmoqda...' : 'Vazifa berish'">Vazifa berish</span>
        </button>
      </div>
    </form>
  </div>
</div>
{% endwith %}
{% endblock %}
